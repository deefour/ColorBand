/** ColorBand - v1.4.2 - 2013-01-17
 * https://github.com/deefour/colorband
 * Copyright (c) 2013 Jason Daly and other contributors; Licensed MIT
 */

(function(t,i){"use strict";function n(i,n){this.element=i,this.$element=t(this.element),this.options=t.extend({},o,n);var e=this;if(t.each(["height","minWidth","maxWidth"],function(){e.options[this]=+(""+e.options[this]).replace(/\D/g,"")}),this._mode=this.options.mode,"auto"===this._mode)this._mode=this._isCanvasSupported()?"canvas":"html";else if("canvas"===this._mode&&!this._isCanvasSupported())return;"string"==typeof this.options.pattern&&/^\d+$/.test(this.options.pattern)&&(this.options.pattern=this.options.pattern.split("").map(function(t){return+t})),this._defaults=o,this._name=s,this.init()}var s="colorBand",e=i.document,o={height:8,minWidth:10,maxWidth:50,mode:"auto",pattern:"random",regenOnResize:!0,regenOnOrientationChange:!0,ignoreCss:!1,containerClass:"colorband",units:"px",preventSameColorSiblings:!0,colors:["#94BFB1","#719071","#EB6861","#F09862","#F8B56C","#FBE688"]};n.prototype={init:function(){this.options.ignoreCss||this.$element.css({position:"relative","padding-top":0,"padding-left":0,"padding-right":0,"margin-top":0,"margin-left":0,"margin-right":0,"line-height":1}),"html"===this._mode?(this.$container=t("<div />").addClass(this.options.containerClass),this.options.ignoreCss||this.$container.css({position:"relative",margin:0,padding:0,top:0,left:0,height:this.options.height+this.options.units,"white-space":"nowrap","overflow-x":"hidden","overflow-y":"visible","line-height":this.options.height+this.options.units})):(this.$container=t("<canvas />").addClass(this.options.containerClass),this.$container.attr({height:this.options.height}),this.options.ignoreCss||this.$container.css({position:"relative",margin:0,padding:0,"line-height":this.options.height+this.options.units})),this.$element.prepend(this.$container),this.options.regenOnResize&&t(i).on("resize",t.proxy(this.render,this)),this.options.regenOnOrientationChange&&t(i).on("orientationchange",t.proxy(this.render,this)),this.render()},_reset:function(){if("html"===this._mode)this.$container.empty(),this.$container.width(this.$element.width());else{var t=this.$container.get(0),i=t.getContext("2d");i.clearRect(0,0,t.width,t.height),this.$container.attr("width",this.$element.width())}this._patternPointer=-1},_renderChunk:function(i,n,s){if("html"===this._mode){var e=t("<div />").addClass("chunk").css({background:this.options.colors[i],width:n+this.options.units});this.options.ignoreCss||e.css({height:this.options.height+this.options.units,"line-height":this.options.height+this.options.units,display:"inline-block",padding:0,margin:0}),this.$container.append(e)}else{var o=this.$container.get(0).getContext("2d");o.fillStyle=this.options.colors[i],o.fillRect(s+1,0,s+1+n,this.options.height)}},_getColor:function(i){var n,s=this.options.colors.length;if(t.isArray(this.options.pattern))n=this.options.pattern[++this._patternPointer%this.options.pattern.length];else if("sequential"===this.options.pattern)n=++i%s;else if(n=t.isFunction(this.options.pattern)?this.options.pattern.apply(this,[i]):Math.floor(Math.random()*s),this.options.preventSameColorSiblings)for(;n===i;)n=this._getColor(i);return n},render:function(){this._reset();for(var t,i,n=Math.ceil(this.$container.width()/this.options.minWidth),s=this.$container.width(),e=-1,o=-1;--n>0&&s>o;)t=e=this._getColor(e),i=Math.floor(Math.random()*(this.options.maxWidth-this.options.minWidth)+this.options.minWidth),this._renderChunk(t,i,o),o+=i},_isCanvasSupported:function(){var t=e.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}},t.fn[s]=function(i){return this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new n(this,i))})}})(jQuery,window);